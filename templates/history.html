<!DOCTYPE html>
<html>
<head>
    <!-- <meta name="viewport" content="width=device-width"> -->
    {% assets "basic_table_css" %}
    <link rel="stylesheet" href="{{ ASSET_URL }}" />
    {% endassets %}

    {% assets "basic_table_js" %}
    <script type="text/javascript" src="{{ ASSET_URL }}"></script>
    {% endassets %}
</head>

<body>
    <h3>Events</h3>
    <table id="events_table" class='display order-column compact' cellspacing='1' width='100%'>
    </table>


    <script>
    $(document).ready(function() {
        let data = {{ events|tojson}};
        let dataTable = $('#events_table').DataTable({
            paging: false,
            data: data,
            columns: [
                {title: "time",    data: "ts", render: formatDate},
                {title: "ip",    data: "ip", defaultContent: "", render: formatIP},
                {title: "user",    data: "cuid", defaultContent: "", render: formatID},
                {title: "event",    data: "msg"}
            ],
            scrollY: "80vh",
            scrollX: true,
            scrollCollapse: true,
            select: true,
            order: [[ 0, "desc" ]]
        });
    });


    </script>
</body>
</html>
